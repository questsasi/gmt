<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="mat-calender">
          <mat-form-field appearance="fill" style="z-index: 2000;">
            <input matInput [matDatepicker]="picker" [(ngModel)]="selectedDate"
              (dateChange)="onChangeDate(selectedDate)">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="card">
          <div class="card-header card-header-danger">
            <div class="float-left">
              <h4 class="card-title ">Reports</h4>
            </div>
          </div>
          <div class="card-body">

            <mat-tab-group>
              <mat-tab label="{{zones.zone_name}}" *ngFor="let zones of reports">
                <div class="card card-custom" *ngFor="let line of zones.lines">
                  <div class="card-body">
                    <div class="d-flex justify-content-between upper-card">
                      <div class="title">
                        <i class="fa fa-arrow-circle-right p-2 pointer" 
                        [ngClass]="{'fa-arrow-circle-down': line.toggle, 'fa-arrow-circle-right': !line.toggle}" (click)="line.toggle = !line.toggle"></i>
                        {{line.line_name}}
                      </div>
                      <div class="circle" [ngClass]="line.percent <= 0 ? 'bg-danger': 'bg-success'">{{line.percent}} %
                      </div>
                    </div>
                    <div class="d-flex align-content-center justify-content-center lower-card">
                      <div class="col">
                        <div class="font-weight-bold">{{line.target_count}}</div>
                        <div class="text-muted">Target o/p</div>
                      </div>
                      <div class="col">
                        <div class="font-weight-bold">{{line.achieved}}</div>
                        <div class="text-muted">Achieved o/p</div>
                      </div>
                      <div class="col">
                        <div class="font-weight-bold" [ngClass]="line.difference <= 0 ? 'text-danger': 'text-success'">
                          {{line.difference}}</div>
                        <div class="text-muted">Difference o/p</div>
                      </div>
                      <div class="col"></div>
                      <div class="col">
                        <div class="font-weight-bold">{{line.production_hrs}}</div>
                        <div class="text-muted">Target hour(s)</div>
                      </div>
                      <div class="col">
                        <div class="font-weight-bold">{{line.productions.length}}</div>
                        <div class="text-muted">Hour(s) produced</div>
                      </div>
                      <div class="col">
                        <div class="font-weight-bold">
                          {{line.production_hrs - line.productions.length }}</div>
                        <div class="text-muted">Remaining hour(s)</div>
                      </div>
                    </div>
                  </div>

                  <table class="table table-striped" *ngIf="line.toggle">
                    <thead class="thead-dark">
                      <tr>
                        <th>Production Hour</th>
                        <th>Production Output</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let production of line.productions">
                        <td>{{production.hour}}</td>
                        <td>{{production.output}}</td>
                      </tr>
                    </tbody>
                  </table>

                </div>
              </mat-tab>
            </mat-tab-group>

          </div>
        </div>
      </div>
    </div>
  </div>